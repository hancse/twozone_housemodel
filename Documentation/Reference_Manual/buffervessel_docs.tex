\section{Documentation buffervessel MvdB}

\subsection{Introduction}

This document describes the buffer vessel model that can be incorporated into the HAN dynamic house model.

\textbf{List of symbols:}

\begin{itemize}
    \item [$m$] {mass [kg]}
    \item [$\dot{m}$] {mass flow [kg/s]}
    \item [$C_w$] {Specific heat of water [J/kg]}
    \item [$T$] {Temperature [C]}
    \item [$U$] {Thermal transmittance [W/K]}
    \item [$A$] {Area [\(m^2\)]}
    \item [$\lambda$] {Heat conductivity [W/mK]}
\end{itemize}

\subsection{Model description}

The model for the buffer vessel is derived from the paper of Rakesh Sinha et al. \cite{sinha2020flexibility}

The model consists of a heating element, located outside of the buffer vessel, which can take water from the vessel and heat the water to a desired temperature.The hot water is then injected to the top of the buffer vessel. 

Hot water is is taken from the top of the buffer vessel on the demand side. Cooled water coming from the load is returned tot the bottom of the vessel.

A schematic description of the buffer vessel is shown below.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\columnwidth]{Figures/buffervessel_setup.JPG}
	\caption[Short title]{Buffer vessel representation}
\end{figure}

Due to the fact that the density of water decreases with temperature above 4 $\degC$, different temperature layers are created.

In order to model this, the buffer vessel will be divided into $N$ different sections 


\subsection{Mathematical description}

For the top layer:

\begin{equation}
	\label{eq:Buffer vessel top layer}
	mC_w \dfrac{dT_1}{dt} = \dot{m_s}C_w(T_s - T_1) + \dot{m_e}C_w(T_1 - T_2)*sgn(\dot{-m_e}) - UA_s(T_1 - T_a) - \frac{A_q\lambda_w}{z}(T_1-T_2)
\end{equation}

For the middle layers:

\begin{equation}
	\label{eq:Buffer vessel middle layers}
	mC_w \dfrac{dT_i}{dt} = \dot{m_e}C_w(T_{i-1} - T_{i})*sgn(\dot{m_e}) + \dot{m_e}C_w(T_{i} - T_{i+1})*sgn(\dot{-m_e}) - UA_s(T_i - T_a) + \frac{A_q\lambda_w}{z}(T_{i-1} + T_{i+1} - 2T_i)
\end{equation}

For the bottom layer:

\begin{equation}
	\label{eq:Buffer vessel bottom layer}
	mC_w \dfrac{dT_n}{dt} = \dot{m_d}C_w(T_r - T_n) + \dot{m_e}C_w(T_{n-1} - T_n)*sgn(\dot{m_e}) - UA_s(T_n + T_a) + \frac{A_q\lambda_w}{z}(T_{n-1}-T_n)
\end{equation}

\newpage

\subsection{Validation}

To check to model from the paper, the following parameters are used:

\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\columnwidth]{Figures/parameters_paper.JPG}
	\caption[Short title]{Buffer vessel parameters}
\end{figure}

This results in the following graph:

\begin{figure}[H]
	\centering
	\subfloat[\centering paper results]{{\includegraphics[width=0.7\columnwidth]{Figures/paper_results.jpg} }}
	\qquad
	\subfloat[\centering Python results]{{\includegraphics[width=0.8\columnwidth]{Figures/Python_validation_graph_buffervessel.png} }}
	\caption{Comparison between paper and python model}
	\label{fig:Comparison}
\end{figure}

\newpage